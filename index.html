<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense tracker</title>
    <meta name="theme-color" content="#0f172a">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Poppins', sans-serif;
      }
      .hide-scrollbar::-webkit-scrollbar {
        display: none;
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "recharts": "https://aistudiocdn.com/recharts@^3.3.0",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.552.0",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>
<body class="bg-slate-900 text-slate-200">
    <div id="root"></div>
    <script type="module">
      import React, { useState, useMemo, useCallback, useEffect } from 'react';
      import ReactDOM from 'react-dom/client';
      import { PieChart, Pie, Cell, Tooltip, Legend, ResponsiveContainer } from 'recharts';
      import {
          Calendar, Plus, Wallet, LayoutGrid, List, MoreVertical, ChevronLeft, ChevronRight, X, Trash2, Edit, Carrot, Fuel,
          UtensilsCrossed, Plane, ShoppingBag, Receipt, Sparkles, Home, Save, Info
      } from 'lucide-react';

      // --- Icons Mapping ---
      const Icons = {
          Calendar, Plus, Wallet, LayoutGrid, List, MoreVertical, ChevronLeft, ChevronRight, X, Trash2, Edit, Carrot, Fuel,
          UtensilsCrossed, Plane, ShoppingBag, Receipt, Sparkles, Home, Save, Info
      };
      
      const IconComponent = ({ name, ...props }) => {
        const Icon = Icons[name] || Icons.ShoppingBag;
        return React.createElement(Icon, props);
      };

      // --- Hook: useLocalStorage ---
      function useLocalStorage(key, initialValue) {
        const [storedValue, setStoredValue] = useState(() => {
          try {
            const item = window.localStorage.getItem(key);
            return item ? JSON.parse(item) : initialValue;
          } catch (error) {
            console.error(error);
            return initialValue;
          }
        });

        useEffect(() => {
          try {
            window.localStorage.setItem(key, JSON.stringify(storedValue));
          } catch (error) {
            console.error(error);
          }
        }, [key, storedValue]);

        return [storedValue, setStoredValue];
      }

      // --- Component: Header ---
      const Header = ({ title, totalBudget, remainingBudget }) => {
        const formatter = new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR', minimumFractionDigits: 0 });
        const percentageLeft = totalBudget > 0 ? (remainingBudget / totalBudget) * 100 : 0;

        return React.createElement(
          'header',
          { 
            className: 'bg-slate-900/95 backdrop-blur-md px-4 pt-8 pb-4 sticky top-0 z-30 border-b border-slate-800 shadow-md' 
          },
          React.createElement('h1', { className: 'text-lg font-bold text-center mb-3 text-slate-100' }, title),
          React.createElement(
            'div',
            { className: 'flex justify-between items-center text-sm' },
            React.createElement(
              'div',
              null,
              React.createElement('p', { className: 'text-slate-400 font-medium' }, 'Remaining'),
              React.createElement('p', { className: `font-black text-3xl ${remainingBudget < 0 ? 'text-red-400' : 'text-blue-400'}` }, formatter.format(remainingBudget))
            ),
            React.createElement(
              'div',
              { className: 'text-right' },
              React.createElement('p', { className: 'text-slate-400 font-medium' }, 'Budget'),
              React.createElement('p', { className: 'font-bold text-lg text-slate-300' }, formatter.format(totalBudget))
            )
          ),
          React.createElement(
            'div',
            { className: 'w-full bg-slate-800 rounded-full h-2 mt-3 overflow-hidden' },
            React.createElement('div', {
              className: 'h-2 rounded-full transition-all duration-500',
              style: { 
                width: `${Math.max(0, Math.min(100, percentageLeft))}%`,
                background: 'linear-gradient(to right, #00A3D9, #00C2E2, #0CB9F3, #95D426)'
              },
            })
          )
        );
      };

      // --- Component: BottomNav ---
      const BottomNav = ({ activeTab, setActiveTab }) => {
        const NavItem = ({ label, icon, isActive, onClick }) => React.createElement(
          'button',
          {
            onClick,
            className: `flex flex-col items-center justify-center w-1/4 transition-colors duration-200 ${isActive ? 'text-blue-400' : 'text-slate-500 hover:text-slate-300'}`,
          },
          icon,
          React.createElement('span', { className: 'text-xs font-medium mt-1' }, label)
        );

        const navItems = [
          { id: 'calendar', label: 'Calendar', icon: React.createElement(Calendar, { size: 24 }) },
          { id: 'transactions', label: 'History', icon: React.createElement(List, { size: 24 }) },
          { id: 'budget', label: 'Budget', icon: React.createElement(Wallet, { size: 24 }) },
          { id: 'dashboard', label: 'Dashboard', icon: React.createElement(LayoutGrid, { size: 24 }) },
        ];

        return React.createElement(
          'nav',
          { className: 'fixed bottom-0 left-0 right-0 bg-slate-900/80 backdrop-blur-sm h-16 flex justify-around items-center z-20 border-t border-slate-700' },
          navItems.map((item) => React.createElement(NavItem, {
            key: item.id,
            label: item.label,
            icon: item.icon,
            isActive: activeTab === item.id,
            onClick: () => setActiveTab(item.id),
          }))
        );
      };
      
      // --- Component: CalendarView ---
      const CalendarView = ({ expenses, onDateClick }) => {
          const [currentDate, setCurrentDate] = useState(new Date());

          const expensesByDate = useMemo(() => {
            return expenses.reduce((acc, expense) => {
              const date = expense.date;
              acc[date] = (acc[date] || 0) + expense.amount;
              return acc;
            }, {});
          }, [expenses]);

          const changeMonth = (amount) => {
            setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + amount, 1));
          };

          const renderCalendar = () => {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const days = [];

            for (let i = 0; i < firstDay; i++) {
              days.push(React.createElement('div', { key: `empty-${i}`, className: 'p-1' }));
            }

            const today = new Date();
            const isCurrentMonth = today.getFullYear() === year && today.getMonth() === month;

            for (let day = 1; day <= daysInMonth; day++) {
              const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
              const dailyTotal = expensesByDate[dateStr] || 0;
              const isToday = isCurrentMonth && today.getDate() === day;

              days.push(
                React.createElement('button', { 
                  key: day, 
                  onClick: () => onDateClick(dateStr),
                  className: `p-1 text-center rounded-lg transition-all ${isToday ? 'bg-blue-900/50 ring-1 ring-blue-500/50' : 'hover:bg-slate-700/50'} h-20 flex flex-col justify-start` 
                },
                  React.createElement('span', { className: `text-sm ${isToday ? 'font-bold text-blue-400' : 'text-slate-300'}` }, day),
                  dailyTotal > 0 && React.createElement('div', { className: 'text-[11px] leading-tight bg-pink-500/20 text-pink-300 font-semibold rounded-md mt-1 px-1 py-0.5 w-full truncate' }, `₹${dailyTotal.toLocaleString('en-IN')}`)
                )
              );
            }
            return days;
          };

          return React.createElement('div', { className: 'bg-slate-800 p-4 rounded-2xl shadow-lg' },
            React.createElement('div', { className: 'flex justify-between items-center mb-4' },
              React.createElement('button', { onClick: () => changeMonth(-1), className: 'p-2 rounded-full hover:bg-slate-700' }, React.createElement(ChevronLeft, { size: 20 })),
              React.createElement('h2', { className: 'text-lg font-semibold text-blue-400' }, currentDate.toLocaleString('default', { month: 'long', year: 'numeric' })),
              React.createElement('button', { onClick: () => changeMonth(1), className: 'p-2 rounded-full hover:bg-slate-700' }, React.createElement(ChevronRight, { size: 20 }))
            ),
            React.createElement('div', { className: 'grid grid-cols-7 gap-1 text-center text-xs text-slate-400 font-medium mb-2' },
              ['S', 'M', 'T', 'W', 'T', 'F', 'S'].map(day => React.createElement('div', { key: day }, day))
            ),
            React.createElement('div', { className: 'grid grid-cols-7 gap-1' }, renderCalendar()),
            React.createElement('p', { className: 'text-[10px] text-slate-500 text-center mt-4' }, 'Tap a date to add record')
          );
      };

      // --- Component: TransactionsView ---
      const TransactionsView = ({ expenses, categories, onDelete }) => {
        const sortedExpenses = useMemo(() => {
          return [...expenses].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());
        }, [expenses]);

        const getCategory = (id) => categories.find(c => c.id === id) || { name: 'Uncategorized', icon: 'ShoppingBag' };
        const formatter = new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR' });

        return React.createElement('div', null,
          React.createElement('h2', { className: 'text-xl font-bold mb-4 text-slate-200' }, 'History'),
          sortedExpenses.length === 0
            ? React.createElement('p', { className: 'text-center text-slate-400 mt-8' }, "No transactions yet.")
            : React.createElement('ul', { className: 'space-y-3' },
              sortedExpenses.map(expense => {
                const category = getCategory(expense.categoryId);
                return React.createElement('li', { key: expense.id, className: 'bg-slate-800 p-3 rounded-xl shadow-sm flex items-center justify-between' },
                  React.createElement('div', { className: 'flex items-center gap-4' },
                    React.createElement('div', { className: 'w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center' },
                      React.createElement(IconComponent, { name: category.icon, size: 24, className: 'text-white' })
                    ),
                    React.createElement('div', null,
                      React.createElement('p', { className: 'font-semibold text-slate-100' }, category.name),
                      React.createElement('p', { className: 'text-xs text-slate-400' }, new Date(expense.date).toLocaleDateString('en-GB')),
                      expense.notes && React.createElement('p', { className: 'text-xs text-slate-500 italic mt-1' }, expense.notes)
                    )
                  ),
                  React.createElement('div', { className: 'text-right' },
                    React.createElement('p', { className: 'font-bold text-red-400' }, `-${formatter.format(expense.amount)}`),
                    React.createElement('button', { onClick: () => onDelete(expense.id), className: 'text-slate-500 hover:text-red-500 mt-1' },
                      React.createElement(Trash2, { size: 16 })
                    )
                  )
                );
              })
            )
        );
      };

      // --- Component: BudgetView ---
      const BudgetView = ({ budget, setBudget, categories, onAddCategory, onDeleteCategory, onUpdateCategory }) => {
        const [isEditingBudget, setIsEditingBudget] = useState(false);
        const [newBudget, setNewBudget] = useState(budget);
        const [showAddForm, setShowAddForm] = useState(false);
        const [editingCategory, setEditingCategory] = useState(null);
        
        const [catName, setCatName] = useState('');
        const [catIcon, setCatIcon] = useState('ShoppingBag');
        const [catLimit, setCatLimit] = useState('');

        const handleBudgetSave = () => { setBudget(newBudget); setIsEditingBudget(false); };
        
        const resetForm = () => {
          setCatName('');
          setCatIcon('ShoppingBag');
          setCatLimit('');
          setShowAddForm(false);
          setEditingCategory(null);
        };

        const handleCategorySubmit = (e) => {
          e.preventDefault();
          const data = { name: catName, icon: catIcon, budget: catLimit ? parseFloat(catLimit) : undefined };
          if (editingCategory) onUpdateCategory({ ...editingCategory, ...data });
          else onAddCategory(data);
          resetForm();
        };

        return React.createElement('div', { className: 'space-y-6' },
          React.createElement('div', { className: 'bg-slate-800 p-4 rounded-2xl shadow-lg' },
            React.createElement('h2', { className: 'font-bold text-lg mb-2 text-slate-200' }, 'Total Monthly Budget'),
            isEditingBudget
              ? React.createElement('div', { className: 'flex items-center gap-2' },
                React.createElement('input', { type: 'number', value: newBudget, onChange: (e) => setNewBudget(Number(e.target.value)), className: 'w-full p-2 bg-slate-700 border-slate-600 rounded-lg text-2xl font-bold text-slate-100' }),
                React.createElement('button', { onClick: handleBudgetSave, className: 'p-2 bg-green-600 text-white rounded-md' }, React.createElement(Save, { size: 20 }))
              )
              : React.createElement('div', { className: 'flex items-center justify-between' },
                React.createElement('p', { className: 'text-3xl font-bold text-blue-400' }, `₹${budget.toLocaleString('en-IN')}`),
                React.createElement('button', { onClick: () => setIsEditingBudget(true), className: 'p-2 text-slate-400 hover:text-blue-400' }, React.createElement(Edit, { size: 20 }))
              )
          ),
          React.createElement('div', { className: 'bg-slate-800 p-4 rounded-2xl shadow-lg' },
            React.createElement('div', { className: 'flex justify-between items-center mb-4' },
              React.createElement('h2', { className: 'font-bold text-lg' }, 'Categories'),
              React.createElement('button', { onClick: () => { setShowAddForm(!showAddForm); setEditingCategory(null); }, className: 'px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium' }, showAddForm ? 'Cancel' : 'Add New')
            ),
            showAddForm && React.createElement('form', { onSubmit: handleCategorySubmit, className: 'bg-slate-700/50 p-4 rounded-lg mb-4 space-y-4' },
               React.createElement('div', { className: 'flex gap-2' },
                 React.createElement('input', { type: 'text', value: catName, onChange: e => setCatName(e.target.value), placeholder: 'Category Name', className: 'w-full p-2 bg-slate-800 rounded-md', required: true }),
                 React.createElement('input', { type: 'number', value: catLimit, onChange: e => setCatLimit(e.target.value), placeholder: 'Limit (Optional)', className: 'w-full p-2 bg-slate-800 rounded-md' })
               ),
               React.createElement('button', { type: 'submit', className: 'w-full py-2 bg-blue-600 rounded-md' }, editingCategory ? 'Update' : 'Add')
            ),
            React.createElement('ul', { className: 'space-y-2' },
              categories.map(category => React.createElement('li', { key: category.id, className: 'flex items-center justify-between p-3 bg-slate-700/50 rounded-lg' },
                React.createElement('div', { className: 'flex items-center gap-3' },
                  React.createElement(IconComponent, { name: category.icon, size: 20, className: 'text-slate-300' }),
                  React.createElement('div', null,
                      React.createElement('span', { className: 'font-medium text-slate-200' }, category.name),
                      category.budget && React.createElement('p', { className: 'text-xs text-slate-400' }, `Budget: ₹${category.budget.toLocaleString('en-IN')}`)
                  )
                ),
                React.createElement('div', { className: 'flex gap-2' },
                  React.createElement('button', { onClick: () => { setEditingCategory(category); setCatName(category.name); setCatIcon(category.icon); setCatLimit(category.budget || ''); setShowAddForm(true); }, className: 'text-slate-500 hover:text-blue-400' }, React.createElement(Edit, { size: 18 })),
                  React.createElement('button', { onClick: () => onDeleteCategory(category.id), className: 'text-slate-500 hover:text-red-400' }, React.createElement(Trash2, { size: 18 }))
                )
              ))
            )
          )
        );
      };

      // --- Component: DashboardView (WITH MONTH SELECTOR) ---
      const DashboardView = ({ expenses, categories, budget }) => {
        const [viewMonth, setViewMonth] = useState(new Date().getMonth());
        const [viewYear, setViewYear] = useState(new Date().getFullYear());

        const monthName = new Date(viewYear, viewMonth).toLocaleString('default', { month: 'long', year: 'numeric' });

        const filteredExpenses = useMemo(() => {
          return expenses.filter(e => {
            const d = new Date(e.date);
            return d.getMonth() === viewMonth && d.getFullYear() === viewYear;
          });
        }, [expenses, viewMonth, viewYear]);

        const changeMonth = (delta) => {
          const newDate = new Date(viewYear, viewMonth + delta, 1);
          setViewMonth(newDate.getMonth());
          setViewYear(newDate.getFullYear());
        };

        const monthlySpent = useMemo(() => filteredExpenses.reduce((sum, e) => sum + e.amount, 0), [filteredExpenses]);
        const COLORS = ['#3b82f6', '#8b5cf6', '#ec4899', '#f97316', '#10b981', '#06b6d4', '#eab308'];

        const dataByCategory = useMemo(() => {
          const map = new Map();
          categories.forEach(cat => map.set(cat.id, { name: cat.name, value: 0 }));
          filteredExpenses.forEach(exp => {
            const entry = map.get(exp.categoryId);
            if (entry) entry.value += exp.amount;
          });
          return Array.from(map.values()).filter(d => d.value > 0);
        }, [filteredExpenses, categories]);

        const formatter = new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR', minimumFractionDigits: 0 });

        return React.createElement('div', { className: 'space-y-6' },
          React.createElement('div', { className: 'flex justify-between items-center bg-slate-800 p-3 rounded-2xl' },
            React.createElement('button', { onClick: () => changeMonth(-1), className: 'p-2 bg-slate-700 rounded-xl' }, React.createElement(ChevronLeft, { size: 20 })),
            React.createElement('h2', { className: 'font-bold text-blue-400' }, monthName),
            React.createElement('button', { onClick: () => changeMonth(1), className: 'p-2 bg-slate-700 rounded-xl' }, React.createElement(ChevronRight, { size: 20 }))
          ),
          React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
            React.createElement('div', { className: 'bg-slate-800 p-4 rounded-2xl text-center' },
                React.createElement('h3', { className: 'text-xs text-slate-400 uppercase font-bold' }, 'Spent'),
                React.createElement('p', { className: 'text-2xl font-black text-red-400' }, formatter.format(monthlySpent))
            ),
            React.createElement('div', { className: 'bg-slate-800 p-4 rounded-2xl text-center' },
                React.createElement('h3', { className: 'text-xs text-slate-400 uppercase font-bold' }, 'Left'),
                React.createElement('p', { className: 'text-2xl font-black text-green-400' }, formatter.format(budget - monthlySpent))
            )
          ),
          React.createElement('div', { className: 'bg-slate-800 p-4 rounded-2xl shadow-lg' },
            React.createElement('h2', { className: 'font-bold text-lg mb-4' }, 'Spending Breakdown'),
            dataByCategory.length > 0
              ? React.createElement('div', { style: { width: '100%', height: 280 } },
                React.createElement(ResponsiveContainer, null,
                  React.createElement(PieChart, null,
                    React.createElement(Pie, { data: dataByCategory, cx: '50%', cy: '50%', innerRadius: 60, outerRadius: 85, paddingAngle: 5, dataKey: 'value' },
                      dataByCategory.map((_, idx) => React.createElement(Cell, { key: idx, fill: COLORS[idx % COLORS.length] }))
                    ),
                    React.createElement(Tooltip, { formatter: v => formatter.format(v), contentStyle: { backgroundColor: '#1e293b', border: 'none', borderRadius: '12px' } }),
                    React.createElement(Legend)
                  )
                )
              )
              : React.createElement('p', { className: 'text-center text-slate-500 py-10 italic' }, 'No data for this month')
          ),
          React.createElement('div', { className: 'bg-slate-800 p-4 rounded-2xl' },
            React.createElement('h3', { className: 'font-bold mb-4' }, 'Category Progress'),
            React.createElement('div', { className: 'space-y-4' },
               categories.filter(c => c.budget).map(cat => {
                 const spent = filteredExpenses.filter(e => e.categoryId === cat.id).reduce((s, e) => s + e.amount, 0);
                 const perc = Math.min((spent / cat.budget) * 100, 100);
                 return React.createElement('div', { key: cat.id },
                   React.createElement('div', { className: 'flex justify-between text-xs mb-1' },
                     React.createElement('span', null, cat.name),
                     React.createElement('span', null, `${formatter.format(spent)} / ${formatter.format(cat.budget)}`)
                   ),
                   React.createElement('div', { className: 'w-full bg-slate-700 h-1.5 rounded-full overflow-hidden' },
                     React.createElement('div', { className: `h-full ${perc > 90 ? 'bg-red-500' : 'bg-blue-500'}`, style: { width: `${perc}%` } })
                   )
                 );
               })
            )
          )
        );
      };

      // --- Component: AddExpenseModal ---
      const AddExpenseModal = ({ onClose, onAddExpense, categories, initialDate }) => {
        const [amount, setAmount] = useState('');
        const [categoryId, setCategoryId] = useState(categories[0]?.id || '');
        const [date, setDate] = useState(initialDate || new Date().toISOString().split('T')[0]);
        const [notes, setNotes] = useState('');

        useEffect(() => {
          if (initialDate) setDate(initialDate);
        }, [initialDate]);

        const handleSubmit = (e) => {
          e.preventDefault();
          if (!amount || !categoryId || !date) return;
          onAddExpense({ amount: parseFloat(amount), categoryId, date, notes });
        };

        return React.createElement('div', { className: 'fixed inset-0 bg-slate-950/90 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center' },
          React.createElement('div', { className: 'bg-slate-900 w-full max-w-sm sm:rounded-3xl border-t sm:border border-slate-800 shadow-2xl p-6' },
            React.createElement('div', { className: 'flex justify-between items-center mb-6' },
              React.createElement('h2', { className: 'text-xl font-bold' }, 'Add Expense'),
              React.createElement('button', { onClick: onClose }, React.createElement(X, { size: 24 }))
            ),
            React.createElement('form', { onSubmit: handleSubmit, className: 'space-y-4' },
              React.createElement('input', { type: 'number', value: amount, onChange: e => setAmount(e.target.value), placeholder: 'Amount (₹)', className: 'w-full p-4 bg-slate-800 rounded-xl text-3xl font-black outline-none border border-slate-700 focus:border-blue-500', required: true, autoFocus: true }),
              React.createElement('div', { className: 'grid grid-cols-4 gap-2 h-24 overflow-y-auto' },
                categories.map(cat => React.createElement('button', { type: 'button', key: cat.id, onClick: () => setCategoryId(cat.id), className: `p-2 rounded-xl border flex flex-col items-center gap-1 transition-all ${categoryId === cat.id ? 'bg-blue-500/20 border-blue-500 ring-1 ring-blue-500' : 'bg-slate-800 border-slate-700'}` },
                  React.createElement(IconComponent, { name: cat.icon, size: 16, className: categoryId === cat.id ? 'text-blue-400' : 'text-slate-500' }),
                  React.createElement('span', { className: 'text-[8px] font-bold uppercase truncate w-full text-center' }, cat.name)
                ))
              ),
              React.createElement('input', { type: 'date', value: date, onChange: e => setDate(e.target.value), className: 'w-full p-3 bg-slate-800 rounded-xl border border-slate-700', required: true }),
              React.createElement('input', { type: 'text', value: notes, onChange: e => setNotes(e.target.value), placeholder: 'Note...', className: 'w-full p-3 bg-slate-800 rounded-xl border border-slate-700' }),
              React.createElement('button', { type: 'submit', className: 'w-full py-4 bg-blue-600 rounded-2xl font-bold uppercase' }, 'Add Record')
            )
          )
        );
      };

      // --- Main App Component ---
      function App() {
        const DEFAULT_CATEGORIES = [
          { id: '1', name: 'Grocery', icon: 'Carrot' },
          { id: '2', name: 'Petrol', icon: 'Fuel' },
          { id: '3', name: 'Dinner', icon: 'UtensilsCrossed' },
          { id: '4', name: 'Travel', icon: 'Plane' },
          { id: '5', name: 'Shopping', icon: 'ShoppingBag' },
          { id: '6', name: 'Bills', icon: 'Receipt' },
          { id: '7', name: 'Maid/Services', icon: 'Sparkles' },
        ];

        const [activeTab, setActiveTab] = useState('calendar');
        const [budget, setBudget] = useLocalStorage('monthlyBudget', 15000);
        const [categories, setCategories] = useLocalStorage('expenseCategories', DEFAULT_CATEGORIES);
        const [expenses, setExpenses] = useLocalStorage('userExpenses', []);
        const [isAddModalOpen, setIsAddModalOpen] = useState(false);
        const [prefilledDate, setPrefilledDate] = useState(null);

        const totalSpent = useMemo(() => expenses.reduce((sum, e) => sum + e.amount, 0), [expenses]);
        const remaining = budget - totalSpent;

        const handleDateClick = (date) => {
          setPrefilledDate(date);
          setIsAddModalOpen(true);
        };

        const handleAddExpense = (exp) => {
          setExpenses(prev => [...prev, { ...exp, id: Date.now().toString() }]);
          setIsAddModalOpen(false);
          setPrefilledDate(null);
        };

        return React.createElement(
          'div',
          { className: 'min-h-screen bg-slate-900 text-slate-200 flex flex-col' },
          React.createElement(Header, { title: 'Expense tracker', totalBudget: budget, remainingBudget: remaining }),
          React.createElement('main', { className: 'flex-grow pb-24 px-4 pt-4' },
            activeTab === 'calendar' && React.createElement(CalendarView, { expenses, onDateClick: handleDateClick }),
            activeTab === 'transactions' && React.createElement(TransactionsView, { expenses, categories, onDelete: id => setExpenses(prev => prev.filter(e => e.id !== id)) }),
            activeTab === 'budget' && React.createElement(BudgetView, { budget, setBudget, categories, onAddCategory: c => setCategories(p => [...p, { ...c, id: Date.now().toString() }]), onDeleteCategory: id => setCategories(p => p.filter(x => x.id !== id)), onUpdateCategory: c => setCategories(p => p.map(x => x.id === c.id ? c : x)) }),
            activeTab === 'dashboard' && React.createElement(DashboardView, { expenses, categories, budget })
          ),
          React.createElement('button', {
            onClick: () => { setPrefilledDate(new Date().toISOString().split('T')[0]); setIsAddModalOpen(true); },
            className: 'fixed bottom-20 right-5 bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-full p-4 shadow-xl z-20'
          }, React.createElement(Plus, { size: 28 })),
          React.createElement(BottomNav, { activeTab, setActiveTab }),
          isAddModalOpen && React.createElement(AddExpenseModal, { onClose: () => { setIsAddModalOpen(false); setPrefilledDate(null); }, onAddExpense: handleAddExpense, categories, initialDate: prefilledDate })
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(React.createElement(React.StrictMode, null, React.createElement(App)));
    </script>
</body>
</html>
